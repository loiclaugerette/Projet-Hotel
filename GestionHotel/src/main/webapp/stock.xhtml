<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:h="http://xmlns.jcp.org/jsf/html"
 xmlns:p="http://primefaces.org/ui"
 xmlns:f="http://xmlns.jcp.org/jsf/core"
 xmlns:c="http://java.sun.com/jsp/jstl/core"
 xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Gestion des stocks</title>
</h:head>
<body>

	<h:outputStylesheet name="css/bootstrap.css" />
	<h:outputScript name="resources/js/bootstrap.js" />
	<ui:include src="navbar.xhtml" />
	


	<div class="container" style="margin-top:40px">
		<h1 class="page-header">Gestion des stocks</h1>
		
        
   
        	<h:form id="formulaire">
        	
 				<h:panelGrid columns="5" style="margin-bottom:10px" cellpadding="0">
					<p:outputLabel value="Hotel: " />
            			<h:selectOneMenu value="#{stockBean.id}" class="form-control">
                        	<c:forEach var="category" items="#{stockBean.hotels}">
                            	<f:selectItem itemLabel="#{category.nom}" itemValue="#{category.id}">
                           		</f:selectItem>
                        	</c:forEach>
                        	<p:ajax update="ProduitsTable,produits" event="click" listener="#{stockBean.showProduits}"/>
                    	</h:selectOneMenu>
        		</h:panelGrid>
        	
        	<br></br>
        	<br></br>
      
            
				<h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
					<p:outputLabel value="Nom : "></p:outputLabel>
					<p:inputText requiredMessage="obligatoire" required="true" value="#{stockBean.nom}"></p:inputText>
					<p:outputLabel value="Quantité : "></p:outputLabel>
					<p:inputText requiredMessage="obligatoire" required="true" value="#{stockBean.quantite}"></p:inputText>
					<p:outputLabel value="Cout achat : "></p:outputLabel>
					<p:inputText requiredMessage="obligatoire" required="true" value="#{stockBean.coutAchat}"></p:inputText>
					<p:outputLabel value="Cout vente : "></p:outputLabel>
					<p:inputText requiredMessage="obligatoire" required="true" value="#{stockBean.coutVente}"></p:inputText>
					<p:commandButton value="Enregistrer" action="#{stockBean.saveProduit}" update="ProduitsTable,produits,formulaire"/>
				</h:panelGrid>
			</h:form>
			<br></br>
		
      		<h:form id="ProduitsTable">
				<h:panelGrid columns="1" style="margin-bottom:10px" cellpadding="5">
					<p:dataTable var="res" value="#{stockBean.produits}">
  						<p:column headerText="Id">
        					<h:outputText value="#{res.idProduit}" />
 	   					</p:column>
 						<p:column headerText="Nom">
        					<h:outputText value="#{res.nom}" />
 	   					</p:column>
    					<p:column headerText="Quantité">
        					<h:outputText value="#{res.quantite}" />
 	   					</p:column>
    					<p:column headerText="Cout d'achat">
        					<h:outputText value="#{res.coutAchat}" />
    					</p:column>
    					<p:column headerText="Cout de vente">
        					<h:outputText value="#{res.coutVente}" />
    					</p:column>
    				</p:dataTable>
				</h:panelGrid>
			</h:form>
				<h:form id="produits">
				<h:panelGrid columns="6" style="margin-bottom:10px" cellpadding="5">
						
						<p:outputLabel value="Produit: " />
            			<h:selectOneMenu value="#{stockBean.idProduit}" class="form-control">
                        	<c:forEach var="category" items="#{stockBean.produits}">
                            	<f:selectItem itemLabel="#{category.nom}" itemValue="#{category.idProduit}">
                           		</f:selectItem>
                        	</c:forEach>
                    	</h:selectOneMenu>
                   
						<p:outputLabel value="Quantité : "></p:outputLabel>
						<p:inputText requiredMessage="obligatoire" required="true" value="#{stockBean.quantiteAchetee}" size="3"></p:inputText>
						
						<p:commandButton value="Acheter" action="#{stockBean.updateQuantity}" update="ProduitsTable,produits"/>
						
				</h:panelGrid>						   
				</h:form>
		   
	</div>		
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" />
</body>
</html>